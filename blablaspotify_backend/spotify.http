GET http://www.sbb.ch

> {%
  client.global.set("token", "BQADkMEvFCXrb6JdEdR0ImBvMcyR1T28n8CZvnmrRvt2MM5ctBRZuQQYpGi8iDwixhV1C2hGB7G-pzz0fth67OBqXKxYi9Jb5FazW3WaGEviMofDGjHcfAi1d6w-9Hpo_NUSRNHqnaMyCNEM6HXRrnIskUp1HoufDXVdSSWosvsI57sVrlfj_8stlFHYayjGvKNH3lEGlFFZTeouJ4ea3FBr");
%}

###
GET https://api.spotify.com/v1/me
Authorization: Bearer {{token}}

> {%
    client.global.set("userId", response.body.id);
    client.log("userId=" + client.global.get("userId"))
%}

###
GET https://api.spotify.com/v1/me/playlists
Authorization: Bearer {{token}}

> {%
    client.global.set("playlist", response.body.items[0].id);
    client.log("playlist=" + client.global.get("playlist"))
%}

###
GET https://api.spotify.com/v1/playlists/{{playlist}}
Authorization: Bearer {{token}}

###
GET https://api.spotify.com/v1/me/player/devices
Authorization: Bearer {{token}}

> {%
    client.global.set("playerId", response.body.devices[0].id);
    client.log("playerId=" + client.global.get("playerId"))
%}

###
PUT https://api.spotify.com/v1/me/player
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "device_ids": ["367876aebfb8d523fe095e41a491917ee2b75637"],
  "play": true
}


###
PUT https://api.spotify.com/v1/me/player/play?device_id=367876aebfb8d523fe095e41a491917ee2b75637
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "context_uri": "spotify:playlist:{{playlist}}",
  "play": true
}
